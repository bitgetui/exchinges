<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoExchange Pro - Advanced Trading Platform</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚ö°</text></svg>">
    
    <!-- External CSS for better organization -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Inline Critical CSS for faster initial load -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #0b0e11;
            --secondary-bg: #1a1d21;
            --card-bg: #1e2329;
            --text-primary: #ffffff;
            --text-secondary: #848e9c;
            --green: #00ff88;
            --red: #ff3333;
            --yellow: #fcd535;
            --blue: #1e53e4;
            --hover-bg: #2b3139;
            --border-color: #2b3139;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Telegram Mini App Style */
        .app-container {
            max-width: 100%;
            margin: 0 auto;
            background: var(--primary-bg);
            min-height: 100vh;
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, #1e2329 0%, #2b3139 50%, #1e2329 100%);
            background-size: 200% 100%;
            animation: skeleton 1.5s ease-in-out infinite;
        }

        @keyframes skeleton {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Smooth Transitions */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Main App Container -->
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <!-- Logo and Brand -->
                <div class="logo-section">
                    <div class="logo">
                        <span class="logo-icon">‚ö°</span>
                        <span class="logo-text">CryptoExchange Pro</span>
                    </div>
                    <span class="version-badge">v2.0</span>
                </div>

                <!-- Navigation Tabs -->
                <nav class="nav-tabs">
                    <a href="#" class="nav-tab active" data-tab="spot">
                        <span class="tab-icon">üí±</span>
                        <span>Spot</span>
                    </a>
                    <a href="#" class="nav-tab" data-tab="futures">
                        <span class="tab-icon">üìä</span>
                        <span>Futures</span>
                    </a>
                    <a href="#" class="nav-tab" data-tab="margin">
                        <span class="tab-icon">‚öñÔ∏è</span>
                        <span>Margin</span>
                    </a>
                    <a href="#" class="nav-tab" data-tab="options">
                        <span class="tab-icon">üéØ</span>
                        <span>Options</span>
                    </a>
                    <a href="#" class="nav-tab" data-tab="earn">
                        <span class="tab-icon">üí∞</span>
                        <span>Earn</span>
                    </a>
                </nav>

                <!-- Header Actions -->
                <div class="header-actions">
                    <!-- Network Status -->
                    <div class="network-status" id="networkStatus">
                        <span class="status-dot online"></span>
                        <span class="status-text">Live</span>
                    </div>
                    
                    <!-- Balance Display -->
                    <div class="balance-display">
                        <span class="balance-icon">üí∞</span>
                        <div class="balance-info">
                            <span class="balance-label">Total Balance</span>
                            <span class="balance-amount" id="userBalance">4,876,367,436,636 USDT</span>
                        </div>
                    </div>

                    <!-- User Menu -->
                    <div class="user-menu">
                        <button class="user-button">
                            <span class="user-avatar">üë§</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sub Header with Stats -->
        <div class="sub-header">
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-label">24h Volume</span>
                    <span class="stat-value">$89.4B</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">BTC Dominance</span>
                    <span class="stat-value">52.3%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Market Cap</span>
                    <span class="stat-value">$2.1T</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Fear & Greed</span>
                    <span class="stat-value greed">75</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-container">
            <!-- Spot Trading Tab -->
            <div class="tab-content active" id="spot-tab">
                <div class="trading-layout">
                    <!-- Left Panel: Market List -->
                    <aside class="market-panel">
                        <!-- Search and Filters -->
                        <div class="market-header">
                            <div class="search-container">
                                <span class="search-icon">üîç</span>
                                <input type="text" class="market-search" placeholder="Search coins..." id="searchInput">
                            </div>
                        </div>
                        
                        <!-- Filter Buttons -->
                        <div class="market-filters">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="favorites">‚≠ê</button>
                            <button class="filter-btn" data-filter="gainers">üöÄ</button>
                            <button class="filter-btn" data-filter="losers">üìâ</button>
                            <button class="filter-btn" data-filter="volume">üìä</button>
                            <button class="filter-btn" data-filter="new">‚ú®</button>
                        </div>

                        <!-- Market List -->
                        <div class="market-list-container">
                            <div class="market-list" id="marketList">
                                <!-- Loading skeleton -->
                                <div class="market-item skeleton">
                                    <div class="skeleton-coin"></div>
                                    <div class="skeleton-price"></div>
                                </div>
                                <div class="market-item skeleton">
                                    <div class="skeleton-coin"></div>
                                    <div class="skeleton-price"></div>
                                </div>
                                <div class="market-item skeleton">
                                    <div class="skeleton-coin"></div>
                                    <div class="skeleton-price"></div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <!-- Center Panel: Chart -->
                    <main class="chart-panel">
                        <!-- Chart Header -->
                        <div class="chart-header">
                            <div class="chart-info">
                                <div class="chart-coin-info">
                                    <img src="https://via.placeholder.com/32" alt="" class="coin-logo" id="selectedCoinLogo">
                                    <div class="coin-details">
                                        <span class="chart-coin-name" id="selectedCoinName">BTC/USDT</span>
                                        <span class="coin-volume" id="selectedCoinVolume">Vol: $28.5B</span>
                                    </div>
                                </div>
                                <div class="price-display">
                                    <div class="chart-price" id="selectedCoinPrice">$0.00</div>
                                    <span class="chart-change positive" id="selectedCoinChange">+0.00%</span>
                                </div>
                            </div>
                            
                            <!-- Chart Controls -->
                            <div class="chart-controls">
                                <!-- Chart Type -->
                                <div class="chart-type-selector">
                                    <button class="chart-type-btn active" data-type="candle">
                                        <span>üïØÔ∏è</span>
                                    </button>
                                    <button class="chart-type-btn" data-type="line">
                                        <span>üìà</span>
                                    </button>
                                    <button class="chart-type-btn" data-type="area">
                                        <span>üìä</span>
                                    </button>
                                </div>

                                <!-- Timeframe Selector -->
                                <div class="timeframe-selector">
                                    <button class="timeframe-btn" data-time="1m">1m</button>
                                    <button class="timeframe-btn" data-time="3m">3m</button>
                                    <button class="timeframe-btn active" data-time="5m">5m</button>
                                    <button class="timeframe-btn" data-time="15m">15m</button>
                                    <button class="timeframe-btn" data-time="30m">30m</button>
                                    <button class="timeframe-btn" data-time="1h">1H</button>
                                    <button class="timeframe-btn" data-time="4h">4H</button>
                                    <button class="timeframe-btn" data-time="1d">1D</button>
                                    <button class="timeframe-btn" data-time="1w">1W</button>
                                </div>

                                <!-- Indicators -->
                                <button class="indicators-btn">
                                    <span>üìê</span> Indicators
                                </button>
                            </div>
                        </div>

                        <!-- Chart Container -->
                        <div class="chart-container">
                            <canvas id="priceChart"></canvas>
                        </div>

                        <!-- Trading View (Order Book & Trades) -->
                        <div class="trading-view">
                            <div class="order-book">
                                <h4>Order Book</h4>
                                <div class="order-book-content" id="orderBook">
                                    <!-- Order book data -->
                                </div>
                            </div>
                            <div class="recent-trades">
                                <h4>Recent Trades</h4>
                                <div class="trades-list" id="recentTrades">
                                    <!-- Recent trades data -->
                                </div>
                            </div>
                        </div>
                    </main>

                    <!-- Right Panel: Order Form -->
                    <aside class="order-panel">
                        <!-- Order Tabs -->
                        <div class="order-tabs">
                            <button class="order-tab buy active" data-type="buy">
                                <span>Buy</span>
                            </button>
                            <button class="order-tab sell" data-type="sell">
                                <span>Sell</span>
                            </button>
                            <button class="order-tab convert" data-type="convert">
                                <span>Convert</span>
                            </button>
                        </div>

                        <!-- Order Content -->
                        <div class="order-content">
                            <!-- Order Type Selector -->
                            <div class="order-type-selector">
                                <button class="order-type-btn active" data-order="market">Market</button>
                                <button class="order-type-btn" data-order="limit">Limit</button>
                                <button class="order-type-btn" data-order="stop-limit">Stop-Limit</button>
                                <button class="order-type-btn" data-order="oco">OCO</button>
                            </div>
                            
                            <!-- Price Input -->
                            <div class="input-group">
                                <label class="input-label">
                                    <span>Price</span>
                                    <span class="input-hint" id="currentMarketPrice">Market Price</span>
                                </label>
                                <div class="input-wrapper">
                                    <input type="number" class="order-input" id="priceInput" placeholder="Market Price" disabled>
                                    <span class="input-suffix">USDT</span>
                                </div>
                            </div>

                            <!-- Amount Input -->
                            <div class="input-group">
                                <label class="input-label">
                                    <span>Amount</span>
                                    <span class="input-hint" id="maxAmount">Max: 0.00</span>
                                </label>
                                <div class="input-wrapper">
                                    <input type="number" class="order-input" id="amountInput" placeholder="0.00" step="0.00000001">
                                    <span class="input-suffix" id="amountSuffix">BTC</span>
                                </div>
                                <!-- Percentage Buttons -->
                                <div class="percentage-buttons">
                                    <button class="percentage-btn" data-percent="25">25%</button>
                                    <button class="percentage-btn" data-percent="50">50%</button>
                                    <button class="percentage-btn" data-percent="75">75%</button>
                                    <button class="percentage-btn" data-percent="100">100%</button>
                                </div>
                            </div>

                            <!-- Order Summary -->
                            <div class="order-summary">
                                <div class="summary-row">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="orderTotal">0.00 USDT</span>
                                </div>
                                <div class="summary-row">
                                    <span class="summary-label">Fee (0.1%)</span>
                                    <span class="summary-value" id="orderFee">0.00 USDT</span>
                                </div>
                                <div class="summary-row">
                                    <span class="summary-label">You'll Receive</span>
                                    <span class="summary-value" id="orderReceive">0.00 BTC</span>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <button class="order-submit-btn buy" id="submitOrderBtn">
                                <span class="btn-icon">üõí</span>
                                Buy BTC
                            </button>

                            <!-- Advanced Options -->
                            <details class="advanced-options">
                                <summary>Advanced Options</summary>
                                <div class="options-content">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="postOnly">
                                        <span>Post Only</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="reduceOnly">
                                        <span>Reduce Only</span>
                                    </label>
                                </div>
                            </details>
                        </div>

                        <!-- Holdings Display -->
                        <div class="holdings-panel">
                            <h4>Your Holdings</h4>
                            <div class="holdings-list" id="userHoldings">
                                <div class="no-holdings">No holdings yet</div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>

            <!-- Futures Trading Tab -->
            <div class="tab-content" id="futures-tab">
                <div class="trading-layout">
                    <!-- Futures Market List -->
                    <aside class="market-panel">
                        <div class="market-header">
                            <input type="text" class="market-search" placeholder="Search futures..." id="futuresSearchInput">
                        </div>
                        <div class="market-list" id="futuresMarketList">
                            <!-- Futures contracts -->
                        </div>
                    </aside>

                    <!-- Futures Chart -->
                    <main class="chart-panel">
                        <div class="chart-header">
                            <div class="chart-info">
                                <span class="chart-coin-name">BTC-PERP</span>
                                <div class="chart-price" id="futuresCoinPrice">$0.00</div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="futuresChart"></canvas>
                        </div>
                    </main>

                    <!-- Futures Order Panel -->
                    <aside class="order-panel">
                        <div class="order-tabs">
                            <button class="order-tab buy active" data-type="long">Long</button>
                            <button class="order-tab sell" data-type="short">Short</button>
                        </div>
                        <div class="order-content">
                            <!-- Leverage Selector -->
                            <div class="leverage-selector">
                                <span class="leverage-label">Leverage:</span>
                                <input type="range" class="leverage-slider" id="leverageSlider" min="1" max="125" value="10">
                                <input type="text" class="leverage-input" id="leverageInput" value="10x">
                            </div>
                            
                            <!-- Futures Order Form -->
                            <div class="input-group">
                                <label class="input-label">Size (Contracts)</label>
                                <div class="input-wrapper">
                                    <input type="number" class="order-input" id="futuresSizeInput" placeholder="0">
                                    <span class="input-suffix">Contracts</span>
                                </div>
                            </div>

                            <div class="margin-info" id="marginRequired">
                                Margin Required: 0.00 USDT
                            </div>

                            <button class="order-submit-btn buy" id="submitFuturesBtn">
                                <span class="btn-icon">üìà</span>
                                Open Long
                            </button>
                        </div>
                    </aside>
                </div>

                <!-- Open Positions Table -->
                <div class="positions-panel">
                    <div class="positions-header">
                        <h3 class="positions-title">Open Positions</h3>
                        <button class="close-all-btn">Close All</button>
                    </div>
                    <table class="positions-table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Size</th>
                                <th>Entry Price</th>
                                <th>Mark Price</th>
                                <th>PNL (%)</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="positionsTableBody">
                            <!-- Positions will be added here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Margin Trading Tab -->
            <div class="tab-content" id="margin-tab">
                <div class="coming-soon">
                    <h2>Margin Trading</h2>
                    <p>Coming Soon...</p>
                </div>
            </div>

            <!-- Options Trading Tab -->
            <div class="tab-content" id="options-tab">
                <div class="coming-soon">
                    <h2>Options Trading</h2>
                    <p>Coming Soon...</p>
                </div>
            </div>

            <!-- Earn Tab -->
            <div class="tab-content" id="earn-tab">
                <div class="coming-soon">
                    <h2>Earn Crypto</h2>
                    <p>Staking and yield farming coming soon...</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-info">
                    <span>¬© 2024 CryptoExchange Pro</span>
                    <span class="separator">|</span>
                    <span>Real-time data from CoinGecko</span>
                </div>
                <div class="footer-links">
                    <a href="#">Terms</a>
                    <a href="#">Privacy</a>
                    <a href="#">API</a>
                    <a href="#">Support</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Settings content -->
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast" id="toast"></div>

    <!-- Scripts -->
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Main Application Script -->
    <script src="advanced-script.js"></script>
    
    <!-- Inline initialization for faster load -->
    <script>
        // Quick initialization before main script loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Initializing CryptoExchange Pro...');
            
            // Show initial loading state
            const marketList = document.getElementById('marketList');
            if (marketList && !window.marketDataLoaded) {
                marketList.innerHTML = '<div class="loading-message">Loading market data...</div>';
            }
            
            // Set network status
            const updateNetworkStatus = () => {
                const status = navigator.onLine ? 'online' : 'offline';
                const statusEl = document.getElementById('networkStatus');
                if (statusEl) {
                    statusEl.querySelector('.status-dot').className = `status-dot ${status}`;
                    statusEl.querySelector('.status-text').textContent = status === 'online' ? 'Live' : 'Offline';
                }
            };
            
            window.addEventListener('online', updateNetworkStatus);
            window.addEventListener('offline', updateNetworkStatus);
            updateNetworkStatus();
        });
    </script>
</body>
</html>
